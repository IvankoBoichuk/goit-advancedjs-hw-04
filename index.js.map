{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\naxios.defaults.baseURL = \"https://pixabay.com/api/\";\n\nexport const fetchImages = async (query, page = \"1\") => {\n    const API_KEY = \"49625718-2fc374da92b01abb8788a4564\";\n    const params = new URLSearchParams({\n        key: API_KEY,\n        q: query,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        page: page,\n        per_page: 15,\n    });\n    const url = `?${params.toString()}`;\n    const response = await axios.get(url);\n    return response.data;\n};","export const compileHtml = (prev, { webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => {\n    return prev + `\n        <li class=\"gallery-item\">\n            <a class=\"gallery-link\" href=\"${largeImageURL}\">\n                <img\n                    class=\"gallery-image\"\n                    src=\"${webformatURL}\"\n                    data-source=\"${largeImageURL}\"\n                    alt=\"${tags}\"\n                />\n            </a>\n            <ul class=\"gallery-item--list\">\n                <li class=\"gallery-item--info\">\n                    <b>Likes</b>\n                    <span>${likes}</span>\n                </li>\n                <li class=\"gallery-item--info\">\n                    <b>Views</b>\n                    <span>${views}</span>\n                </li>\n                <li class=\"gallery-item--info\">\n                    <b>Comments</b>\n                    <span>${comments}</span>\n                </li>\n                <li class=\"gallery-item--info\">\n                    <b>Downloads</b>\n                    <span>${downloads}</span>\n                </li>\n            </ul>\n        </li>\n    `;\n}\n\nexport const clearGallery = (gallery) => {\n    gallery.innerHTML = \"\";\n}\n\nexport const render = (gallery, images) => {\n    const html = images.reduce(compileHtml, \"\");\n    gallery.insertAdjacentHTML(\"beforeend\", html);\n};\n\nexport const showLoader = (loader) => {\n    loader.classList.add(\"active\");\n};\n\nexport const hideLoader = (loader) => {\n    loader.classList.remove(\"active\");\n};","import \"izitoast/dist/css/iziToast.min.css\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport iziToast from \"izitoast\";\nimport SimpleLightbox from \"simplelightbox\";\n\nimport \"./css/iziToast.css\";\nimport { fetchImages } from \"./js/pixabay-api\";\nimport { clearGallery, hideLoader, render, showLoader } from \"./js/render-functions\";\n\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n    const refs = {\n        form: document.getElementById(\"search-form\"),\n        gallery: document.getElementById(\"gallery\"),\n        loader: document.getElementById(\"loader\"),\n        loadMoreBtn: document.getElementById(\"load-more\"),\n    }\n\n    let page = 1;\n    let lastQuery = null;\n    \n    const lightbox = new SimpleLightbox('.gallery a');\n\n    refs.gallery.addEventListener('click', clicHandler);\n    \n    refs.form.addEventListener(\"submit\", async (event) => {\n        event.preventDefault();\n        const formData = new FormData(event.target);\n        const query = formData.get(\"q\");\n\n        if (!query) {\n            iziToast.error({\n                title: 'Error',\n                message: 'Please enter a search query.',\n                position: 'topRight',\n            });\n            return;\n        }\n\n        if (query !== lastQuery) {\n            page = 1;\n            lastQuery = query;\n            refs.loadMoreBtn.classList.remove(\"active\");\n        }\n\n        clearGallery(refs.gallery);\n        \n        showLoader(refs.loader);\n\n        const {total, hits, totalHits} = await fetchImages(query);\n        \n        if (hits.length === 0) {\n            iziToast.error({\n                title: 'Error',\n                message: '\"Sorry, there are no images matching your search query. Please try again!\".',\n                position: 'topRight',\n            });\n            hideLoader(refs.loader);\n            return;\n        }\n\n        if (totalHits > hits.length) {\n            refs.loadMoreBtn.classList.add(\"active\");\n        }\n        \n        hideLoader(refs.loader);\n\n        render(refs.gallery, hits);\n        \n        lightbox.refresh();\n    });\n\n    refs.loadMoreBtn.addEventListener(\"click\", async () => {\n        page += 1;\n        const formData = new FormData(refs.form);\n        const query = formData.get(\"q\");\n\n        showLoader(refs.loader);\n\n        const { hits, totalHits } = await fetchImages(query, page);\n        \n        if (hits.length === 0) {\n            iziToast.info({\n                title: 'Info',\n                message: 'No more images to load.',\n                position: 'topRight',\n            });\n            hideLoader(refs.loader);\n            return;\n        }\n\n        const isFinish = (totalHits / 15) <= page;\n        if (isFinish) {\n            refs.loadMoreBtn.classList.remove(\"active\");\n            iziToast.info({\n                title: 'Info',\n                message: 'We\\'re sorry, but you\\'ve reached the end of search results..',\n                position: 'topRight',\n            });\n        } \n        \n        render(refs.gallery, hits);\n\n        hideLoader(refs.loader);\n        \n        lightbox.refresh();\n    });\n\n});\n\n\n\nconst clicHandler = (e) => {\n    e.preventDefault();\n    if (!e.target.classList.contains(\"gallery-image\")) return;\n    // SimpleLightbox.create(`<img src=\"${e.target.dataset.source}\" width=\"800\" height=\"600\">`).show()\n}"],"names":["axios","fetchImages","query","page","API_KEY","url","compileHtml","prev","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","gallery","render","images","html","showLoader","loader","hideLoader","refs","lastQuery","lightbox","SimpleLightbox","clicHandler","event","iziToast","total","hits","totalHits"],"mappings":"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"}